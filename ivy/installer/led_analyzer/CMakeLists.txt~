cmake_minimum_required(VERSION 2.8)

SET(CPACK_INCLUDE_TOPLEVEL_DIRECTORY FALSE)
SET(CPACK_PACKAGE_FILE_NAME led_analyzer-${VERSION_FULL})

SET(CPACK_GENERATOR "ZIP")
INCLUDE(CPack)

# Build the ivy file.
CONFIGURE_FILE(ivy.xml ivy-${VERSION_FULL}.xml)

#-----------------------------------------------------------------------------
#
# Install the 32bit files and the documentation.
#
INSTALL(FILES ${COCO_WIN32_INSTALL}/modules/led_analyzer/led_analyzer.dll 
        DESTINATION windows_x86/build/lua_plugins
)

INSTALL(FILES ${COCO_WIN32_INSTALL}/ColorControl/ColorControl.exe 
        DESTINATION windows_x86/build
)

INSTALL(FILES ${LUA_WIN32_INSTALL}/liblua.dll
        DESTINATION windows_x86/build
)

INSTALL(FILES ${LUA_WIN32_INSTALL}/lua.exe
        DESTINATION windows_x86/build
)

INSTALL(DIRECTORY ${COCO_WIN32_INSTALL}/doc
	DESTINATION windows_x86/build
)

#-----------------------------------------------------------------------------
#
# Install the 64bit files and lua files.
#
INSTALL(FILES ${COCO_WIN64_INSTALL}/modules/led_analyzer/led_analyzer.dll 
        DESTINATION windows_amd64/build/lua_plugins
)

INSTALL(FILES ${COCO_WIN64_INSTALL}/ColorControl/ColorControl.exe 
        DESTINATION windows_amd64/build
)

INSTALL(FILES ${LUA_WIN64_INSTALL}/liblua.dll
        DESTINATION windows_amd64/build
)

INSTALL(FILES ${LUA_WIN64_INSTALL}/lua.exe
        DESTINATION windows_amd64/build
)

INSTALL(DIRECTORY ${COCO_WIN64_INSTALL}/doc
	DESTINATION windows_amd64/build
)

#-----------------------------------------------------------------------------

INSTALL(FILES install.xml
        DESTINATION .)

#-----------------------------------------------------------------------------

#Install the general LUA Files
INSTALL(DIRECTORY ${LED_ANALYZER_LUA}/lua
	DESTINATION windows_x86/build
)

INSTALL(DIRECTORY ${LED_ANALYZER_LUA}/lua
	DESTINATION windows_amd64/build
)

INSTALL(DIRECTORY ${LED_ANALYZER_LUA}/example_device
	DESTINATION windows_x86/build
)

INSTALL(DIRECTORY ${LED_ANALYZER_LUA}/example_device
	DESTINATION windows_amd64/build
)


#-----------------------------------------------------------------------------
#
# Filter the pom.xml file.
#
SET(POM_ARTIFACT_ID  "led_analyzer")
SET(POM_GROUP_ID     "tools.muhkuh.org")
SET(POM_VERSION      "${VERSION_FULL}")
SET(POM_PACKAGING    "zip")
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/../pom.xml pom.xml)


#-----------------------------------------------------------------------------
#
# Filter the artifacts.xml file.
#
SET(ARTIFACT_DIRECTORY    "${CMAKE_CURRENT_BINARY_DIR}")
SET(ARTIFACT_ARTIFACT_ID  "led_analyzer")
SET(ARTIFACT_GROUP_ID     "tools.muhkuh.org")
SET(ARTIFACT_VERSION      "${VERSION_FULL}")
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/../artifacts.xml ${ARTIFACT_LISTS_OUTPUT}/artifacts_led_analyzer.xml)

